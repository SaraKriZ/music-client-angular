<!-- Display each song in a card with title, artist, album image, and description -->
 

<div class="music-list-container">
	<div class="search-section">
		<h1>Music Search App</h1>
		<div class="search-box">
			<input
				type="text"
				[(ngModel)]="searchQuery"
				placeholder="Search for songs or artists"
				(keyup.enter)="onSearchSubmit()"
				class="search-input"
			/>
			<button class="search-button" (click)="onSearchSubmit()">Search</button>
		</div>

		<div class="history">
			<div class="history-header">
				<span>Recent searches</span>
				<button class="clear" (click)="clearHistory()" *ngIf="history.length">Clear</button>
			</div>
			<div class="history-list">
				<button class="history-item" *ngFor="let t of history" (click)="selectHistory(t)">{{ t }}</button>
			</div>
		</div>
	</div>

	<div *ngIf="isLoading$ | async" class="loading">Loading...</div>

	<div *ngIf="(error$ | async) as err" class="error">{{ err }}</div>

	<div class="songs-grid">
		<a *ngFor="let s of (songs$ | async)" [routerLink]="['/music', s.id]" class="song-card card-link">
			<div class="album-image-wrapper">
				<img
					[src]="s.artworkUrl || placeholderDataUrl"
					(error)="onImageError($event)"
					[alt]="s.title"
					class="album-image"
				/>
				<!-- <ng-template #placeholder>
					<div class="placeholder-image">No Image</div>
				</ng-template> -->
			</div>
			<div class="song-details">
				<h3 class="song-title">{{ s.title }}</h3>
				<p class="artist-name">{{ s.artist }}</p>
				<p class="album-name" *ngIf="s.album">{{ s.album }}</p>
				<p class="description" *ngIf="s.description">{{ s.description }}</p>
			</div>
		</a>
	</div>

	<div *ngIf="!(isLoading$ | async) && (songs$ | async)?.length === 0 && !(error$ | async)" class="no-results">
		Enter a search query to find songs.
	</div>

<div class="more-section" *ngIf="!(isLoading$ | async) && (songs$ | async)?.length! > 0">
	<button class="more-button" (click)="loadMore()" [disabled]="(isLoading$ | async)" *ngIf="(songs$ | async)?.length! < totalCount">More</button>
</div>
</div>
